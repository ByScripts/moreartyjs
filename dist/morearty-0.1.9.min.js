// Generated by uRequire v0.6.18 - template: 'combined' 
// Combined template optimized with RequireJS/r.js v2.1.14 & almond.
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(t,n){"use strict";var e=!("function"!=typeof define||!define.amd),r="object"==typeof exports,i=function(){var t,e,r;return function(n){function i(t,n){return m.call(t,n)}function u(t,n){var e,r,i,u,a,o,s,c,l,f,h,p=n&&n.split("/"),d=y.map,v=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(n){for(p=p.slice(0,p.length-1),t=t.split("/"),a=t.length-1,y.nodeIdCompat&&w.test(t[a])&&(t[a]=t[a].replace(w,"")),t=p.concat(t),l=0;l<t.length;l+=1)if(h=t[l],"."===h)t.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||v)&&d){for(e=t.split("/"),l=e.length;l>0;l-=1){if(r=e.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if(i=d[p.slice(0,f).join("/")],i&&(i=i[r])){u=i,o=l;break}if(u)break;!s&&v&&v[r]&&(s=v[r],c=l)}!u&&s&&(u=s,o=c),u&&(e.splice(0,o,u),t=e.join("/"))}return t}function a(t,e){return function(){return p.apply(n,k.call(arguments,0).concat([t,e]))}}function o(t){return function(n){return u(n,t)}}function s(t){return function(n){g[t]=n}}function c(t){if(i(_,t)){var e=_[t];delete _[t],b[t]=!0,h.apply(n,e)}if(!i(g,t)&&!i(b,t))throw new Error("No "+t);return g[t]}function l(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,d,v,g={},_={},y={},b={},m=Object.prototype.hasOwnProperty,k=[].slice,w=/\.js$/;d=function(t,n){var e,r=l(t),i=r[0];return t=r[1],i&&(i=u(i,n),e=c(i)),i?t=e&&e.normalize?e.normalize(t,o(n)):u(t,n):(t=u(t,n),r=l(t),i=r[0],t=r[1],i&&(e=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},v={require:function(t){return a(t)},exports:function(t){var n=g[t];return"undefined"!=typeof n?n:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:f(t)}}},h=function(t,e,r,u){var o,l,f,h,p,y,m=[],k=typeof r;if(u=u||t,"undefined"===k||"function"===k){for(e=!e.length&&r.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=d(e[p],u),l=h.f,"require"===l)m[p]=v.require(t);else if("exports"===l)m[p]=v.exports(t),y=!0;else if("module"===l)o=m[p]=v.module(t);else if(i(g,l)||i(_,l)||i(b,l))m[p]=c(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(u,!0),s(l),{}),m[p]=g[l]}f=r?r.apply(g[t],m):void 0,t&&(o&&o.exports!==n&&o.exports!==g[t]?g[t]=o.exports:f===n&&y||(g[t]=f))}else t&&(g[t]=r)},t=e=p=function(t,e,r,i,u){if("string"==typeof t)return v[t]?v[t](e):c(d(t,e).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=i,i=u),i?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),p},p.config=function(t){return p(t)},t._defined=g,r=function(t,n,e){n.splice||(e=n,n=[]),i(g,t)||i(_,t)||(_[t]=[t,n,e])},r.amd={jQuery:!0}}(),r("almond",function(){}),r("Util",["require","exports","module"],function(){var t,n,e;t=function(t){return"string"==typeof t&&"?"!==t.charAt(0)},n=function(t,n){for(var e=n(t[0]),r=1;r<t.length;r++)if(n(t[r])!==e)return r;return null},e=function(t,n){return t.slice(n).reverse().concat(t.slice(0,n))};var r=function(t,n){return Object.getOwnPropertyNames(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}),n};return{hashcode:function(t){var n,e,r,i=0;if(0===t.length)return i;for(n=0,r=t.length;r>n;n++)e=t.charCodeAt(n),i=(i<<5)-i+e,i|=0;return i},identity:function(t){return t},not:function(t){return!t},constantly:function(t){return function(){return t}},afterComplete:function(t,n){var e=t();e&&"function"==typeof e.always?e.always(n):n()},undefinedOrNull:function(t){return void 0===t||null===t},startsWith:function(t,n){return 0===t.indexOf(n)},toString:function(t){switch(t){case void 0:return"undefined";case null:return"null";default:return"string"==typeof t?'"'+t+'"':Array.isArray(t)?"["+t.join(", ")+"]":t.toString()}},equals:function(t,n){return t===n||t&&t.equals&&t.equals(n)},getPropertyValues:function(t){return Object.keys(t).map(function(n){return t[n]})},find:function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(n(r,e,t))return r}return null},findWithIndex:function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(n(r,e,t))return{index:e,value:r}}return null},arrayRemove:function(t,n){var e=t.slice(0);return e.splice(n,1),e},arrayInsert:function(t,n,e){var r=t.slice(0);return r.splice(n,0,e),r},arrayUpdate:function(t,n,e){var r=t.slice(0);return r[n]=e,r},resolveArgs:function(r,i){var u={};if(arguments.length>1){var a,o,s,c=Array.isArray(i)?i:Array.prototype.slice.call(arguments,1);if(t(c[0])||!(s=n(c,t)))a=c,o=r;else{var l=Array.isArray(r)?r:Array.prototype.slice.call(r);a=e(c,s),o=e(l,l.length-(c.length-s))}for(var f=0,h=0;f<a.length&&h<o.length;f++){var p=a[f],d=o[h];if(t(p))u[p]=d,h++;else{var v="function"==typeof p?p(d):"?"!==p.charAt(0)?p:p.substring(1);(v||void 0===d)&&(u[v]=d,h++)}}}return u},canRepresentSubpath:function(t){var n=typeof t;return"string"===n||"number"===n||Array.isArray(t)},shallowMerge:function(t,n){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},papply:function(t,n,e){var r=this,i=function(n){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):null;if(n){var u={};return i._props?(r.shallowMerge(i._props,u),r.shallowMerge(n,u)):u=n,t(u,e)}return t(i._props,e)};if(t._props){var u={};e!==!1?(r.shallowMerge(t._props,u),r.shallowMerge(n,u)):(r.shallowMerge(n,u),r.shallowMerge(t._props,u)),i._props=u}else i._props=n;return i},subclass:function(t,n,e){var i=Object.create(n.prototype);r(t.prototype,i),t.prototype=i,t._super=n.prototype,e&&this.shallowMerge(e,t.prototype),Object.freeze(t.prototype)}}}),r("data/Associative",["require","exports","module"],function(){var t,n,e,r;t=function(){throw new Error("Abstract class instatiation")},n=function(){throw new Error("Abstract method invocation")},e=function(){throw new Error("Path must point to a key")},r=function(t){return t instanceof o};var i,u;i=function(t,n,e,u){if(0===t.length)return n;if(r(e)){var a=t[0],o=e.get(a);return n.unshift({associative:e,key:a}),i(t.slice(1),n,o,u)}return n},u=function(t,n,e){var r=i(n,[],t);if(r.length!==n.length)return t;var u=r[0],a=u.associative,o=u.key,s=e(a,o);return s===a?t:r.slice(1).reduce(function(t,n){return n.associative.assoc(n.key,t)},s)};var a=function(){this.constructor===a&&t()};a.prototype=Object.freeze({hasNext:function(){n()},next:function(){n()}});var o=function(){this.constructor===o&&t()};return o.prototype=Object.freeze({get:function(){n()},update:function(){n()},assoc:function(){n()},dissoc:function(){n()},isAssociative:function(t){return r(t)},getIn:function(t){if(t.length>0){var n=t[0],e=t.slice(1),i=this.get(n);return null!==i?r(i)?i.getIn(e):0===e.length?i:null:null}return this},updateIn:function(t,n){return 0!==t.length?u(this,t,function(t,e){return t.update(e,n)}):void e()},dissocIn:function(t){switch(t.length){case 0:e();break;case 1:return this.dissoc(t[0]);default:return u(this,t,function(t,n){return t.dissoc(n)})}},Iter:a}),o}),r("data/Map",["require","exports","module","../Util","./Associative"],function(t,n,e,r,i){var u,a,o,s,c=5,l=Math.pow(2,c),f=l-1;u=function(t,n){return n>>>t&f},a=function(t){var n=1431655765,e=858993459,r=252645135;return t-=t>>1&n,t=(t&e)+(t>>2&e),t=t+(t>>4)&r,t+=t>>8,t+=t>>16,127&t},o=function(t){return 1<<t},s=function(t,n){return a(t&n-1)};var h,p,d,v,g,_,y,b,m,k;h=null,p={},d=function(t){return!t},v=function(t){return t===p},g=function(t,n,e){var r=e();return v(r)?h:new w(t,n,r)},_=function(t,n,e,r,i){return d(i)?g(n,e,r):i.update(t,n,e,r)},y=function(t,n,e){return d(e)?n:e.reduce(t,n)},b=function(t,n){for(var e=null,r=0;r<n._children.length;r++){var i=n._children[r].find(t);if(i){e=i;break}}return e},m=function(t,n,e){if(t===n)return!0;var r=d(t),i=d(n);return r||i?r&&i:t.equals(n,e)},k=function(t){return t instanceof I};var w,A,x,j=function(t,n,e){var r=n._hash,i=e._hash;if(r===i)return new A(r,[n,e]);var a=u(t,r),s=u(t,i);return new x(o(a)|o(s),a===s?[j(t+c,n,e)]:s>a?[n,e]:[e,n])},V=function(t,n,e){var r=t.get(e),i=r&&k(r)&&k(n)?r.merge(n):n;return t.assoc(e,i)};w=function(t,n,e){this._hash=t,this._key=n,this._value=e},w.prototype=Object.freeze({get:function(t,n,e){return e===this._key?this._value:null},update:function(t,n,e,r){var i;return e===this._key?(i=r(this._value),v(i)?h:i!==this._value?new w(n,e,i):this):(i=r(),v(i)?this:j(t,this,new w(n,e,i)))},reduce:function(t,n){return t(n,this)},map:function(t){var n=t(this._value);return n===this._value?this:new w(this._hash,this._key,t(this._value,this._key))},find:function(t){return t(this._value,this._key)?this._value:null},equals:function(t,n){return t instanceof w&&this._key===t._key?n.isAssociative(this._value)&&n.isAssociative(t._value)?this._value.equals(t._value):this._value===t._value:!1}}),A=function(t,n){this._hash=t,this._children=n},A.prototype=function(){var t=function(t,n,e,i){var u,a,o=r.findWithIndex(t,function(t){return t._key===e});if(o){var s=o.index;u=i(o.value),u!==o.value?(a=t.slice(0),v(u)?a.splice(s,1):a[s]=new w(n,e,u)):a=t}else u=i(),v(u)?a=t:(a=t.slice(0),a.push(new w(n,e,u)));return a};return Object.freeze({get:function(t,n,e){var i=r.find(this._children,function(t){return t._key===e});return i?i._value:null},update:function(n,e,r,i){if(e===this._hash){var u=t(this._children,e,r,i);return u.length>1?new A(this._hash,u):u[0]}var a=i();return v(a)?this:j(n,this,new w(e,r,a))},reduce:function(t,n){return this._children.reduce(t,n)},map:function(t){return new A(this._hash,this._children.map(function(n){return n.map(t)}))},find:function(t){var n=r.find(this._children,function(n){return t(n._value,n._key)});return n?n._value:null},equals:function(t,n){return t instanceof A&&this._hash===t._hash&&this._children.length===t._children.length&&this._children.every(function(e,r){return e.equals(t._children[r],n)})}})}(),x=function(t,n){this._mask=t,this._children=n},x.prototype=Object.freeze({get:function(t,n,e){var r=u(t,n),i=o(r),a=this._mask&i;return a?this._children[s(this._mask,i)].get(t+c,n,e):null},update:function(t,n,e,i){var a=u(t,n),l=o(a),f=s(this._mask,l),p=this._mask&l,v=this._children,_=p?v[f].update(t+c,n,e,i):g(n,e,i),y=p&&d(_),b=!p&&!d(_),m=y?this._mask&~l:b?this._mask|l:this._mask;if(m){var k=v.length,A=y?k-1:b?k+1:k;return y?1===A&&v[1^f]instanceof w?v[1^f]:new x(m,r.arrayRemove(v,f)):b?new x(m,r.arrayInsert(v,f,_)):new x(m,r.arrayUpdate(v,f,_))}return h},reduce:function(t,n){for(var e=this._children,r=n,i=0,u=e.length;u>i;i++){var a=e[i];r=a instanceof w?t(r,a):a.reduce(t,r)}return r},map:function(t){return new x(this._mask,this._children.map(function(n){return n.map(t)}))},find:function(t){return b(t,this)},equals:function(t,n){return t instanceof x&&this._children.length===t._children.length&&this._children.every(function(e,r){var i=t._children[r];return i&&e.equals(i,n)})}});var I=function(t){this._root=t};I.prototype=Object.freeze({fill:function(){for(var t=this,n=0;n<arguments.length;n+=2)t=t.assoc(arguments[n],arguments[n+1]);return t},isEmpty:function(){return d(this._root)},get:function(t){if(this.isEmpty())return null;var n=this._root.get(0,r.hashcode(t),t);return r.undefinedOrNull(n)?null:n},contains:function(t){return null!==this.get(t)},update:function(t,n){var e=_(0,r.hashcode(t),t,n,this._root);return e===this._root?this:new I(e)},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,r.constantly(n))},dissoc:function(t){return this.update(t,r.constantly(p))},join:function(t){return this.isEmpty()?t:t.reduce(function(t,n,e){return t.assoc(e,n)},this)},iter:function(){return new O(this)},reduce:function(t,n){var e=this;return y(function(n,r){return t(n,r._value,r._key,e)},n,this._root)},map:function(t){return this.isEmpty()?this:new I(this._root.map(function(n,e){return t(n,e,this)}.bind(this)))},foreach:function(t){y(function(n,e){t(e._value,e._key,this)}.bind(this),null,this._root)},filter:function(t){var n=this,e=this.reduce(function(e,r,i){return t(r,i,n)?e.map=e.map.assoc(i,r):e.someSkipped=!0,e},{map:S,someSkipped:!1});return e.someSkipped?e.map:n},find:function(t){return this.isEmpty()?null:this._root.find(function(n,e){return t(n,e,this)}.bind(this))},equals:function(t){return this===t||t instanceof I&&m(this._root,t._root,this)},size:function(){return y(function(t){return t+1},0,this._root)},toString:function(){var t=this.reduce(function(t,n,e){var i=""===t?"":t+", ";return i+='"'+e+'": '+r.toString(n)},"");return"{"+t+"}"},isInstance:function(t){return k(t)},entries:function(){return y(function(t,n){return t.push([n._key,n._value]),t},[],this._root)},keys:function(){return y(function(t,n){return t.push(n._key),t},[],this._root)},values:function(){return y(function(t,n){return t.push(n._value),t},[],this._root)},fillFromObject:function(t,n){var e=n||r.identity;return Object.keys(t).reduce(function(n,r){return n.assoc(r,e(t[r]))},this)},toObject:function(t){var n=t||r.identity;return this.reduce(function(t,e,r){return t[r]=n(e),t},{})},merge:function(t){return this.isEmpty()||this===t?t:t.reduce(V,this)},makeSafeKey:function(t){return t.replace(/\./g,"")}}),r.subclass(I,i);var O=function(t){this._map=t,this._nextKeys=t.keys()};O.prototype=Object.freeze({hasNext:function(){return this._nextKeys.length>0},next:function(){var t=this._nextKeys[0],n=this._map.get(t);return this._nextKeys.splice(0,1),{key:t,value:n}}}),r.subclass(O,I._super.Iter);var S=new I(h);return S}),r("data/Vector",["require","exports","module","../Util","./Associative"],function(t,n,e,r,i){var u,a,o;u=function(t,n){var e=t._backingArray.slice(0);return new s(n(e))},a=function(t,n,e){return t===n?!0:t.length!==n.length?!1:t.every(function(t,r){var i=n[r];return e.isAssociative(t)&&e.isAssociative(i)?t.equals(i):t===i})},o=function(t){return t instanceof s};var s=function(t){this._backingArray=t};s.prototype=Object.freeze({fill:function(){if(0===arguments.length)return this;var t=Array.prototype.slice.call(arguments);return new s(this._backingArray.concat(t))},isEmpty:function(){return 0===this._backingArray.length},get:function(t){var n=this._backingArray[t];return r.undefinedOrNull(n)?null:n},contains:function(t){return t<this._backingArray.length},update:function(t,n){if(this.contains(t)){var e=this.get(t),r=n(e);return r===e?this:u(this,function(n){return n[t]=r,n})}var i=n();return u(this,function(n){return n[t]=i,n})},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,r.constantly(n))},dissoc:function(t){return this.contains(t)?u(this,function(n){return n.splice(t,1),n}):this},join:function(t){return this.isEmpty()?t:t.isEmpty()?this:new s(this._backingArray.concat(t._backingArray))},iter:function(){return new c(this)},reduce:function(t,n){return this._backingArray.reduce(function(n,e,r){return t(n,e,r,this)}.bind(this),n)},map:function(t){var n=this;return n.isEmpty()?n:u(n,function(e){return e.map(function(e,r){return t(e,r,n)})})},foreach:function(t){var n=this;n.isEmpty()||n._backingArray.forEach(function(e,r){t(e,r,n)})},filter:function(t){var n=this,e=n.isEmpty()?n:u(n,function(e){return e.filter(function(e,r){return t(e,r,n)})});return e.size()===n.size()?n:e},find:function(t){var n=this;return r.find(n._backingArray,function(e,r){return t(e,r,n)})},equals:function(t){return this===t||t instanceof s&&a(this._backingArray,t._backingArray,this)},size:function(){return this._backingArray.length},toString:function(){return"["+this._backingArray.map(function(t){return r.toString(t)}).join(", ")+"]"},isInstance:function(t){return o(t)},insertAt:function(t,n){return u(this,function(e){return t<e.length?e.splice(t,0,n):e[t]=n,e})},prepend:function(t){return u(this,function(n){return n.unshift(t),n})},append:function(t){return u(this,function(n){return n.push(t),n})},fillFromArray:function(t,n){var e=n?t.map(n):t;return this.fill.apply(this,e)},toArray:function(t){return t?this._backingArray.map(t):this._backingArray.slice(0)}}),r.subclass(s,i);var c=function(t){this._backingArray=t._backingArray,this._nextIndex=0};return c.prototype=Object.freeze({hasNext:function(){return this._nextIndex<this._backingArray.length},next:function(){return this._backingArray[this._nextIndex++]}}),r.subclass(c,i.prototype.Iter),new s([])}),r("data/Util",["require","exports","module","./Map","./Vector"],function(t,n,e,r,i){var u,a;return u=function(t){return r.isInstance(t)?t.toObject(u):i.isInstance(t)?t.toArray(u):t},a=function(t){return Array.isArray(t)?i.fillFromArray(t,a):"object"==typeof t?r.fillFromObject(t,a):t},{toJs:function(t){return u(t)},fromJs:function(t){return a(t)},groupBy:function(t,n,e){return t.reduce(function(t,r){var i=Array.isArray(n)?r.getIn(n):r.get(n);return i?t.assoc(e?e(i):i,r):t},r)}}}),r("util/Holder",["require","exports","module"],function(){var t=function(t){this._value=t};return t.prototype=Object.freeze({init:function(n){return new t(n)},getValue:function(){return this._value},setValue:function(t){this._value=t},updateValue:function(t){var n=this._value;return this._value=t(n),n}}),new t(null)}),r("Binding",["require","exports","module","./Util","./data/Map","./data/Vector","./util/Holder"],function(t,n,e,r,i,u,a){var o,s,c;o=function(t,n,e){return new q(n,t._regCountHolder,e,t._listeners,t._listenerNestingLevelHolder)},s=function(t){return t._backingValueHolder.getValue()},c=function(t,n){t._backingValueHolder.setValue(n)};var l,f,h,p,d,v;l=[],f=".",h=function(t){return t?t.split(f):[]},p=function(t){return"string"==typeof t?h(t):r.undefinedOrNull(t)?[]:t},d=function(t){return"string"==typeof t?t:t.join(f)},v=function(t,n){return t.concat(n)};var g,_,y,b,m;g=function(t,n){return t.getIn(n)},_=function(t,n,e){var r=v(t._path,e),i=n(s(t),r);return c(t,i),r},y=function(t,n,e){return _(t,function(t,e){return t.updateIn(e,n)},e)},b=function(t,n){var e=v(t._path,n),r=s(t).dissocIn(e);return c(t,r),e.slice(0,e.length-1)},m=function(t){return i.isInstance(t)?i:u.isInstance(t)?u:null};var k,w,A,x,j,V,I;k=function(t,n){t._listenerNestingLevelHolder.updateValue(function(t){return t+1}),n(t._listenerNestingLevelHolder.getValue()),t._listenerNestingLevelHolder.updateValue(function(t){return t-1})},w=function(t,n){return t.length===n.length?"":d(n.slice(t.length))},A=function(t,n,e,i,u){var a=p(n),o=p(e),s=g(i,a),c=g(u,a);s!==c&&r.getPropertyValues(t).forEach(function(t){t.disabled||t.cb(s,c,e,w(a,o))})},x=function(t,n,e,r,i){if(2>i){var u=t[""];u&&A(u,l,d(n),e,r)}},j=function(t,n){return r.startsWith(n,t)||r.startsWith(t,n)},V=function(t,n,e,i){var u=d(n);Object.keys(t).filter(r.identity).forEach(function(n){j(n,u)&&A(t[n],n,u,e,i)})},I=function(t,n,e){k(t,function(r){var i=s(t);V(t._listeners,n,i,e),x(t._listeners,n,i,e,r)})};var O,S;O=function(t,n){return r.find(r.getPropertyValues(t._listeners),function(t){return!!t[n]})},S=function(t,n,e){var r=O(t,n);r&&(r[n].disabled=e)};var q=function(t,n,e,r,i){this._backingValueHolder=t,this._regCountHolder=n||a.init(0),this._path=e||l,this._listeners=r||{},this._listenerNestingLevelHolder=i||a.init(0)};q.prototype=Object.freeze({init:function(t){return new q(a.init(t))},withBackingValue:function(t){return o(this,a.init(t),this._path)},setBackingValue:function(t,n){var e=s(this);this._backingValueHolder.setValue(t),n!==!1&&I(this,l,e)},val:function(t){return g(s(this),v(this._path,p(t)))},sub:function(t){return o(this,this._backingValueHolder,v(this._path,p(t)))},update:function(){var t=r.resolveArgs(arguments,"?subpath","update"),n=s(this),e=y(this,t.update,p(t.subpath));I(this,e,n)},assoc:function(){var t=r.resolveArgs(arguments,"?subpath","newValue");this.update(t.subpath,r.constantly(t.newValue))},dissoc:function(t){var n=s(this),e=b(this,p(t));I(this,e,n)},clear:function(t){this.update(t,function(t){return m(t)})},addListener:function(t,n){var e="reg"+this._regCountHolder.updateValue(function(t){return t+1}),r=d(v(this._path,p(t))),i=this._listeners[r],u={cb:n,disabled:!1};if(i)i[e]=u;else{var a={};a[e]=u,this._listeners[r]=a}return e},addGlobalListener:function(t){return this.addListener(l,t)},enableListener:function(t){S(this,t,!1)},disableListener:function(t){S(this,t,!0)},withDisabledListener:function(t,n){var e=O(this,t);if(e){var i=e[t];i.disabled=!0,r.afterComplete(n,function(){i.disabled=!1})}else n()},removeListener:function(t){var n=O(this,t);return n?delete n[t]:!1},atomically:function(){return new E(this,[],[])},asArrayPath:function(t){return p(t)},asStringPath:function(t){return d(t)},isInstance:function(t){return t instanceof q}});var E=function(t,n,e){this._binding=t,this._updates=n,this._removals=e,this._committed=!1};return E.prototype=function(){var t,n,e,i,u;return t=function(t,n,e,r){var i=t._updates.slice(0);return i.push({binding:n,update:e,subpath:r}),i},n=function(t,n,e){var r=t._removals.slice(0);return r.push({binding:n,subpath:e}),r},e=function(t){return t._updates.length>0||t._removals.length>0},i=function(t){if(t.length<2)return t;for(var n=t.sort(),e=n[0],i=d(e),u=[e],a=1;a<n.length;a++){var o=n[a],s=d(o);r.startsWith(s,i)||(u.push(o),i=s)}return u},u=function(t){if(t._committed)throw new Error("Transaction already committed");var n=t._updates.map(function(t){return y(t.binding,t.update,t.subpath)}),e=t._removals.map(function(t){return b(t.binding,t.subpath)});return t._committed=!0,n.concat(e)},Object.freeze({update:function(){var n=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding","update"),e=n.binding||this._binding,i=t(this,e,n.update,p(n.subpath));return new E(e,i,this._removals)},assoc:function(){var t=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding","newValue");return this.update(t.subpath,t.binding,r.constantly(t.newValue))},dissoc:function(){var t=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding"),e=t.binding||this._binding,i=n(this,e,p(t.subpath));return new E(e,this._updates,i)},clear:function(){var n=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding"),e=n.binding||this._binding,i=t(this,e,function(t){return m(t)},p(n.subpath));return new E(e,i,this._removals)},commit:function(t){if(e(this)){var n=this._binding,r=s(n),a=u(this),o=s(n);if(t!==!1){if(o!==r){var c=i(a);return k(n,function(t){var e=n._listeners;c.forEach(function(t){V(e,t,o,r)}),x(e,c[0],o,r,t)}.bind(n)),a}return[]}return a}return[]}})}(),new q(a.init(i))}),r("History",["require","exports","module","./data/Map","./data/Vector"],function(t,n,e,r,i){var u,a,o,s,c,l;return u=function(t){t.assoc(r.fill("listenerId",null,"undo",i,"redo",i))},a=function(t){t.atomically().assoc("undo",i).assoc("redo",i).commit()},o=function(t){var n=t.val("listenerId");t.removeListener(n),t.assoc(null)},s=function(t,n){var e=t.addListener([],function(e,u,a,o){n.atomically().update(function(n){return n.update("undo",function(n){var i=t.asArrayPath(o);return n.prepend(r.fillFromObject({newValue:i.length?e.getIn(i):e,oldValue:i.length?u.getIn(i):u,path:o}))}).assoc("redo",i)}).commit(!1)});n.atomically().assoc("listenerId",e).commit(!1)},c=function(t,n,e,r){r.withDisabledListener(e,function(){r.assoc(t,n)})},l=function(t,n,e,r,i){var u=n.val();if(u.isEmpty())return!1;var a=u.get(0);return n.atomically().dissoc(0).update(e,function(t){return t.prepend(a)}).commit(!1),c(a.get("path"),a.get(i),r,t),!0},{init:function(t,n){u(n),s(t,n)},clear:function(t){a(t)},destroy:function(t){o(t)},hasUndo:function(t){var n=t.val("undo");return!!n&&!n.isEmpty()},hasRedo:function(t){var n=t.val("redo");return!!n&&!n.isEmpty()},undo:function(t,n){var e=n.val("listenerId"),r=n.sub("undo"),i=n.sub("redo");return l(t,r,i,e,"oldValue")},redo:function(t,n){var e=n.val("listenerId"),r=n.sub("undo"),i=n.sub("redo");return l(t,i,r,e,"newValue")}}}),r("util/Callback",["require","exports","module","../Util"],function(t,n,e,r){return{assoc:function(t){var n=r.resolveArgs(arguments,"binding",function(t){return r.canRepresentSubpath(t)?"subpath":null},"?f");return function(e){var r=e.target.value;return t.assoc(n.subpath,n.f?n.f(r):r),!1}},dissoc:function(t){var n=r.resolveArgs(arguments,"binding",function(t){return r.canRepresentSubpath(t)?"subpath":null},"?pred");return function(e){var r=e.target.value;return(!n.pred||n.pred(r))&&t.dissoc(n.subpath),!1}},onKey:function(t,n,e,r){return function(i){return i.charCode===n&&i.shiftKey===e&&i.ctrlKey===r?(t(i),!1):!0}},onEnter:function(t){return this.onKey(t,13,!1,!1)},onEscape:function(t){return this.onKey(t,27,!1,!1)}}}),r("Morearty",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback"],function(t,e,r,i,u,a,o,s,c,l){var f=function(t,n,e){this.React=t,this._initialState=n,this._previousState=u,this._currentStateBinding=s.init(n),this._configuration=e,this._fullUpdateQueued=!1,this._fullUpdateInProgress=!1};return f.prototype=function(){var t,e,r;return t=function(t,n,e){var r=n.props[t._configuration.statePropertyName];return e?r[e]:r},e=function(t,n){var e=t.val(),r=t.withBackingValue(n).val();return e!==r},r=function(t,n){var r=t._previousState;if(s.isInstance(n))return e(n,r);var u=i.getPropertyValues(n);return!!i.find(u,function(t){return e(t,r)})},Object.freeze({Util:i,Data:{Map:u,Vector:a,Util:o},Binding:s,History:c,Callback:l,state:function(){return this._currentStateBinding},currentState:function(){return this.state().val()},previousState:function(){return this._previousState},resetState:function(t){this._currentStateBinding.setBackingValue(this._initialState,t)},changed:function(){var t=i.resolveArgs(arguments,"binding",function(t){return i.canRepresentSubpath(t)?"subpath":null},"?compare"),n=t.binding.val(t.subpath),e=t.binding.withBackingValue(this._previousState).val(t.subpath);return t.compare?!t.compare(n,e):n!==e},init:function(t){var e=this,r=e._configuration.requestAnimationFrameEnabled,i=n&&n.requestAnimationFrame,u=function(n,r){e._previousState=r,e._fullUpdateQueued?(e._fullUpdateInProgress=!0,t.forceUpdate(function(){e._fullUpdateQueued=!1,e._fullUpdateInProgress=!1})):t.forceUpdate()};e._currentStateBinding.addGlobalListener(function(t,n){r&&i?i(u.bind(e,t,n),null):u(t,n)})},createClass:function(n){var e=this,i=function(){if(e._fullUpdateInProgress)return!0;var n=t(e,this);return!n||r(e,n)};return n.shouldComponentUpdate||(n.shouldComponentUpdate=i),n.shouldComponentUpdateSuper=i,n.getState=function(n){return t(e,this,n)},n.getPreviousState=function(n){return t(e,this,n).withBackingValue(e._previousState).val()},e.React.createClass(n)},queueFullUpdate:function(){this._fullUpdateQueued=!0}})}(),{createContext:function(t,n,e){var r=u.isAssociative(n)?n:o.fromJs(n),i=e||{};return new f(t,r,{statePropertyName:i.statePropertyName||"state",requestAnimationFrameEnabled:i.requestAnimationFrameEnabled||!1})}}}),r("Main",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback","./Morearty"],function(t,e,r){var i=function(t){return{Util:t("./Util"),Data:{Map:t("./data/Map"),Vector:t("./data/Vector"),Util:t("./data/Util")},Binding:t("./Binding"),History:t("./History"),Callback:t("./util/Callback"),createContext:t("./Morearty").createContext}}.call(this,t,e,r),u=n.Morearty;return n.Morearty=i,i.noConflict=function(){return n.Morearty=u,i},i}),e("Main")};return e?define(i):r?module.exports=i():i()}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);